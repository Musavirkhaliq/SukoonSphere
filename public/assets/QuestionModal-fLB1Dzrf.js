import{r,m as S,j as e,p as T,ae as D,B as c,k as q}from"./index-BG9rIXzN.js";const Q=({isOpen:v,onClose:j,refetchQuestions:u})=>{const[d,x]=r.useState(!1),[a,l]=r.useState([]),[n,o]=r.useState(""),[i,p]=r.useState(""),[m,g]=r.useState(""),N=S();if(!v)return null;const b=t=>{t.preventDefault(),l([]),o(""),p(""),g(""),j()},f=t=>{t.preventDefault(),n.trim()&&!a.includes(n.trim())&&(l([...a,n.trim()]),o(""))},w=t=>{l(a.filter(s=>s!==t))},k=t=>{t.key==="Enter"&&(t.preventDefault(),f(t))},C=async t=>{var s,y;if(t.preventDefault(),!i.trim()){c.error("Please enter your question");return}try{x(!0),await q.post("/qa-section/",{questionText:i,context:m,tags:a}),c.success("Question posted successfully!"),N("/answer"),u&&u(),b(t)}catch(h){console.error("Error posting question:",h),c.error(((y=(s=h.response)==null?void 0:s.data)==null?void 0:y.msg)||"Failed to post question")}finally{x(!1)}};return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 backdrop-blur-sm px-2 ",children:e.jsxs("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-xl p-4 md:p-6 w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl scale-100 ",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-800 sticky top-0 bg-white pt-2",children:"Ask a Question"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("input",{type:"text",value:i,onChange:t=>p(t.target.value),placeholder:"Your Question",className:"input w-full p-3 rounded-lg bg-gray-50 text-gray-800 border border-gray-200  focus:ring-2 focus:ring-[var(--primary)]  transition-all duration-200"})}),e.jsx("div",{className:"space-y-2",children:e.jsx("textarea",{value:m,onChange:t=>g(t.target.value),placeholder:"More Details",rows:"3",className:"textarea w-full p-3 rounded-lg bg-gray-50 text-gray-800 border border-gray-200  focus:ring-2 focus:ring-[var(--primary)] transition-all duration-200"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Add Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:a.map((t,s)=>e.jsxs("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-full text-sm flex items-center gap-1",children:[t,e.jsx("button",{type:"button",onClick:()=>w(t),className:"hover:text-blue-800",children:e.jsx(T,{className:"w-3 h-3"})})]},s))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:t=>o(t.target.value),onKeyDown:k,placeholder:"Add a tag",className:"flex-1 p-2 rounded-lg bg-gray-50 border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-[var(--primary)] transition-all duration-200"}),e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:e.jsx(D,{size:12})})]}),e.jsx("p",{className:"text-sm text-gray-500 italic mt-1",children:"Add relevant tags to help others find your question"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-3 sticky bottom-0 bg-white pb-2",children:[e.jsx("button",{type:"button",onClick:b,className:"btn-red",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"btn-2 disabled:opacity-50",children:d?"Posting...":"Add Question"})]})]})]})})};export{Q as default};
