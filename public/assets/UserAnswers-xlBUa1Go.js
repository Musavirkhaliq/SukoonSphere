import{J as g,z as f,a as w,b as j,k as p,R as y,j as e,C as N}from"./index-CX54NAfH.js";const b=()=>{const t=g(),{user:x}=f(),{ref:h,inView:c}=w(),{data:i,fetchNextPage:l,hasNextPage:a,isFetchingNextPage:n,status:o,refetch:m}=j({queryKey:["userAnswers",t==null?void 0:t._id],queryFn:async({pageParam:s=1})=>(await p.get(`/qa-section/user-answers/${t==null?void 0:t._id}?page=${s}&limit=10`)).data,getNextPageParam:s=>{if(s!=null&&s.pagination)return s.pagination.hasNextPage?s.pagination.currentPage+1:void 0},enabled:!!(t!=null&&t._id),refetchOnWindowFocus:!1,refetchOnMount:!1,cacheTime:5*60*1e3});y.useEffect(()=>{c&&a&&!n&&l()},[c,l,a,n]);const u=s=>{m()};if(o==="error")return e.jsx("div",{className:"text-center text-red-500 py-4",children:"Error loading answers"});const r=(i==null?void 0:i.pages.flatMap(s=>s.answers))||[];return e.jsxs("div",{className:"lg:p-6 bg-white rounded-xl shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-8",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Answers"," ",e.jsx("span",{className:"text-blue-500 ml-2",children:r.length})]})}),o==="loading"?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--primary)]"})}):r.length===0?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No answers yet"}),e.jsx("p",{className:"text-gray-500 max-w-md mx-auto",children:"Share your knowledge by answering questions!"})]}):e.jsxs("div",{className:"space-y-6",children:[r.map((s,d)=>e.jsx(N,{answer:{...s,author:{userId:s.createdBy,username:s.username,userAvatar:s.userAvatar}},user:x,answerCount:r.length,onDelete:u},`${s._id}-${d}`)),e.jsxs("div",{ref:h,className:"py-4 text-center",children:[n&&e.jsx("div",{className:"text-gray-500",children:"Loading more answers..."}),!n&&a&&e.jsx("div",{className:"text-gray-400",children:"Scroll for more answers"}),!a&&r.length>0&&e.jsx("div",{className:"text-gray-400",children:"No more answers to load"})]})]})]})};export{b as default};
