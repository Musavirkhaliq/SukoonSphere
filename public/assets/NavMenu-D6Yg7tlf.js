import{j as e,a3 as b,a4 as Q,a5 as V,w as _,I as l,a6 as Z,a7 as w,a8 as C,a9 as j,aa as k,ab as A,ac as H,r as u,ad as f,ae as O,af as G,f as J,h as X,ag as L,ah as ee,ai as se,aj as ae,ak as te,al as re,R as S}from"./index-D4VtgvRl.js";import{R as D}from"./index-GqxeR97T.js";import{a as oe,b as ne,c as le,B as F}from"./index-CFRJoVzy.js";import{a as $}from"./index-DvuEcEQy.js";import{l as K,R as ce,a as ie}from"./PageLinks-EVS1Tg0Q.js";const P="/assets/SukoonSphere_Logo-BMUVOwJt.png";function de(){return e.jsx("div",{className:"hidden lg:flex justify-center flex-grow",children:e.jsx("ul",{className:"flex mt-[.8rem] h-10 gap-5 items-center",children:K.map((s,r)=>e.jsx(xe,{link:s,index:r},s.name))})})}const xe=({link:s,index:r})=>e.jsxs("div",{className:"group relative h-full align-middle",children:[e.jsxs(b,{to:s.address,className:"flex group items-center justify-center ",children:[e.jsx("span",{className:"ml-2",children:s.name}),r!==0&&e.jsx(Q,{className:"size-[1.4rem] ml-1 group-hover:rotate-180 transition-all duration-300 ease-in-out transform hover:scale-110 text-[var(--primary)] group-hover:text-[var(--ternery)] drop-shadow-sm hover:drop-shadow-md"})]}),s.sublinks&&e.jsx(me,{sublinks:s.sublinks})]}),me=({sublinks:s})=>e.jsxs("ul",{className:"top-14 absolute opacity-0 max-h-0 invisible group-hover:opacity-100 group-hover:max-h-[500px] group-hover:visible transition-[opacity, max-height, transform] duration-300 ease-in-out transform group-hover:translate-y-1 shadow-[0px_1px_10px_rgba(0,0,0,0.1)] bg-white p-2 rounded-[5px] w-72",children:[e.jsx(oe,{className:"text-lg absolute -top-3 left-5 text-white"}),s.map(r=>e.jsx(he,{sublink:r},r.name))]}),he=({sublink:s})=>e.jsx("li",{className:"transition-opacity duration-300 ease-in-out border-b-[2px] border-gray-500] last-of-type:border-none",children:e.jsxs(b,{to:s.address,className:"flex items-center gap-2 px-2 py-2 text-[var(--primary)] hover:text-[var(--ternery)] opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[e.jsx("div",{className:"border bg-[var(--primary)] text-white text-base border-[var(--primary)] rounded-full p-2 font-bold",children:s.icon}),e.jsxs("div",{className:"flex flex-col ml-2 text-[16px] text-gray-600",children:[e.jsx("span",{className:"hover:text-[var(--ternery)]",children:s.name}),e.jsx("span",{className:"text-[12px] text-gray-400",children:s.description})]})]})});function z(s){return V({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Medal"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M20.692,3.755a1.519,1.519,0,0,0-1.27-.69h-4.41a1.487,1.487,0,0,0-1.36.87L12,7.485l-1.66-3.55a1.487,1.487,0,0,0-1.36-.87H4.572a1.5,1.5,0,0,0-1.35,2.14l3.73,8.02a5.638,5.638,0,0,0-.46,2.21,5.5,5.5,0,0,0,11,0,5.419,5.419,0,0,0-.46-2.2l3.75-8.03A1.525,1.525,0,0,0,20.692,3.755ZM4.122,4.785a.527.527,0,0,1,.03-.49.494.494,0,0,1,.42-.23h4.41a.507.507,0,0,1,.46.29l2.61,5.58h-.06a5.505,5.505,0,0,0-4.43,2.25Zm7.87,15.15a4.5,4.5,0,1,1,4.5-4.5A4.5,4.5,0,0,1,11.992,19.935Zm7.89-15.15-3.46,7.4a5.454,5.454,0,0,0-3.21-2.11l-.66-1.42,2-4.3a.507.507,0,0,1,.46-.29h4.41a.482.482,0,0,1,.42.23A.505.505,0,0,1,19.882,4.785Z"},child:[]},{tag:"path",attr:{d:"M12.077,16.88l1.024.538a.174.174,0,0,0,.253-.184l-.2-1.14a.174.174,0,0,1,.051-.154l.828-.807a.175.175,0,0,0-.1-.3L12.8,14.669a.177.177,0,0,1-.132-.1l-.512-1.037a.174.174,0,0,0-.313,0l-.512,1.037a.174.174,0,0,1-.131.1l-1.145.166a.175.175,0,0,0-.1.3l.828.807a.174.174,0,0,1,.05.154l-.2,1.14a.174.174,0,0,0,.253.184l1.024-.538A.172.172,0,0,1,12.077,16.88Z"},child:[]}]}]}]})(s)}function pe({user:s,miniMenu:r,handleLogout:n}){const{user:c}=_();return e.jsx("div",{className:`${r?"opacity-100 max-h-[500px] ":"opacity-0 max-h-0"} absolute overflow-hidden transition-all duration-300 
      ease-in-out shadow-lg rounded-[4px] bg-[var(--body)] flex flex-col w-72 top-10 right-0 `,style:{transition:"opacity 0.5s ease, max-height 0.5s ease "},children:e.jsxs("div",{className:"flex items-center flex-col gap-4 pb-3 relative",children:[e.jsx("div",{className:"bg-[var(--primary)] w-full h-[100px] flex items-center justify-center relative rounded-t-lg",children:e.jsx("h4",{className:"text-white text-lg font-bold",children:s==null?void 0:s.name})}),e.jsxs("div",{className:"flex flex-col justify-center items-center mt-[-40px] z-10",children:[e.jsx("img",{className:"w-12 h-12 object-cover rounded-full border-1 border-black shadow-lg",src:(s==null?void 0:s.avatar)||"https://cdn-icons-png.flaticon.com/512/147/147142.png",alt:"User"}),e.jsx("h4",{className:"text-[var(--gray--900)] mt-2 font-semibold",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-[var(--grey--800)] text-sm",children:s==null?void 0:s.email}),e.jsx("div",{className:"mt-2"}),e.jsx("div",{className:"flex gap-1",children:e.jsx(ue,{loggedInUser:c})}),e.jsx("div",{className:"flex justify-center gap-4 mt-4",children:e.jsx("button",{onClick:n,className:"btn-2",children:"Logout"})})]})]})})}const ue=({loggedInUser:s})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative group",children:[e.jsx(l,{to:"/user/change-passowrd",children:e.jsx("button",{className:"bg-gray-800 hover:bg-gray-900 text-white rounded-full p-2",children:e.jsx(ne,{className:"text-lg"})})}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 -top-10 bg-gray-800 text-white text-sm rounded py-1 px-3 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-all duration-300",children:["Change Password",e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 button-4 w-2 h-2 bg-gray-800 rotate-45"})]})]}),((s==null?void 0:s.role)!=="contributor"||(s==null?void 0:s.role)==="admin")&&e.jsxs("div",{className:"relative group",children:[e.jsx(l,{to:"/user/request-contributor",children:e.jsx("button",{className:"bg-gray-800 hover:bg-gray-900 text-white rounded-full p-2",children:e.jsx(z,{className:"size-5"})})}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 -top-10 bg-gray-800 text-white text-sm rounded py-1 px-3 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-all duration-300",children:["Request to contribute",e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2  button-4 w-2 h-2 bg-gray-800 rotate-45"})]})]}),(s==null?void 0:s.role)==="admin"&&e.jsxs("div",{className:"relative group",children:[e.jsx(l,{to:"/admin",children:e.jsx("button",{className:"bg-gray-800 hover:bg-gray-900 text-white rounded-full p-2",children:e.jsx(Z,{className:"text-lg"})})}),e.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 -top-10 bg-gray-800 text-white text-sm rounded py-1 px-3 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-all duration-300",children:["Admin",e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2  button-4 w-2 h-2 bg-gray-800 rotate-45"})]})]})]}),ve={POST_LIKE:{icon:j,iconColor:"text-red-500",message:"Liked your post"},POST_COMMENT:{icon:k,iconColor:"text-gray-900",message:"commented on your post"},POST_REPLY:{icon:A,iconColor:"text-blue-500",message:"replied to your comment"},COMMENT_LIKE:{icon:j,iconColor:"text-red-500",message:"liked your comment"},REPLY_LIKE:{icon:j,iconColor:"text-red-500",message:"liked your reply"}},y=({item:s,type:r})=>{var i,d,a;const n=ve[r],c=n.icon,x=t=>(t==null?void 0:t.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name||"Anonymous")}&background=random`;return e.jsxs(l,{to:`/posts/${s.postId._id}`,className:"px-4 py-2.5 hover:bg-black/5 cursor-pointer flex items-center space-x-3 transition-colors",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx(l,{to:`/about/user/${s.createdBy._id}`,children:e.jsx("img",{src:x(s.createdBy),alt:(i=s.createdBy)==null?void 0:i.name,className:" w-10 h-10 rounded-full object-cover"})}),e.jsx("div",{className:"absolute  -bottom-2 -right-2 z-10  bg-white/90   p-1 rounded-full ",children:e.jsx(c,{className:`w-4 h-4 ${n.iconColor}  `})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{to:`/about/user/${s.createdBy._id}`,children:e.jsxs("span",{className:"text-sm font-medium text-[var(--ternery)] line-clamp-2 capitalize hover:underline block",children:[(d=s.createdBy)==null?void 0:d.name," "]})}),e.jsx("span",{className:"text-[var(--grey--900)]",children:n.message})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-[var(--grey--800)]",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:C(new Date(s.createdAt))})]})]}),((a=s.postId)==null?void 0:a.imageUrl)&&e.jsx("div",{className:"relative w-10 h-10 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.postId.imageUrl,alt:"Post thumbnail",className:"w-full h-full object-cover"})})]})},je=({item:s})=>e.jsx(y,{item:s,type:"POST_LIKE"}),ge=({item:s})=>e.jsx(y,{item:s,type:"POST_COMMENT"}),fe=({item:s})=>e.jsx(y,{item:s,type:"POST_REPLY"}),ye=({item:s})=>e.jsx(y,{item:s,type:"COMMENT_LIKE"}),Ne=({item:s})=>e.jsx(y,{item:s,type:"REPLY_LIKE"}),be={QUESTION_ANSWERED:{icon:ce,iconColor:"text-grey-900",message:"answered your question"},ANSWER_COMMENT:{icon:k,iconColor:"text-gray-900",message:"commented on your answer"},ANSWER_LIKED:{icon:j,iconColor:"text-red-500",message:"liked your answer"},ANSWER_COMMENT_LIKED:{icon:j,iconColor:"text-red-500",message:"liked your comment on answer"},ANSWER_COMMENT_REPLY_LIKED:{icon:j,iconColor:"text-red-500",message:"liked your reply on answer"},ANSWER_COMMENT_REPLY:{icon:A,iconColor:"text-blue-500",message:"replied to your comment on answer"}},g=({item:s,type:r,link:n})=>{var d,a,t;console.log({time:s.createdAt});const c=be[r],x=c.icon,i=m=>(m==null?void 0:m.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent(m.name||"Anonymous")}&background=random`;return e.jsxs(l,{to:n,className:"px-4 py-2.5 hover:bg-black/5 cursor-pointer flex items-center space-x-3 transition-colors",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx(l,{to:`/about/user/${s.createdBy._id}`,children:e.jsx("img",{src:i(s.createdBy),alt:(d=s.createdBy)==null?void 0:d.name,className:" w-10 h-10 rounded-full object-cover"})}),e.jsx("div",{className:"absolute  -bottom-2 -right-2 z-10  bg-white/90   p-1 rounded-full ",children:e.jsx(x,{className:`w-4 h-4 ${c.iconColor}  `})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{to:`/about/user/${s.createdBy._id}`,children:e.jsxs("span",{className:"text-sm font-medium text-[var(--ternery)] line-clamp-2 capitalize hover:underline block",children:[(a=s.createdBy)==null?void 0:a.name," "]})}),e.jsx("span",{className:"text-[var(--grey--900)]",children:c.message})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-[var(--grey--800)] pl-2",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:C(new Date(s.createdAt))})]})]}),((t=s.postId)==null?void 0:t.imageUrl)&&e.jsx("div",{className:"relative w-10 h-10 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.postId.imageUrl,alt:"Post thumbnail",className:"w-full h-full object-cover"})})]})},we=({item:s})=>e.jsx(g,{item:s,type:"QUESTION_ANSWERED",link:`/QA-section/question/${s==null?void 0:s.questionId}`}),Ce=({item:s})=>e.jsx(g,{item:s,type:"ANSWER_COMMENT",link:`/QA-section/question/answer/${s==null?void 0:s.answerId}/comments`}),Ee=({item:s})=>e.jsx(g,{item:s,type:"ANSWER_LIKED",link:`/QA-section/question/${s==null?void 0:s.questionId}`}),Le=({item:s})=>e.jsx(g,{item:s,type:"ANSWER_COMMENT_LIKED",link:`/QA-section/question/${s==null?void 0:s.questionId}`}),_e=({item:s})=>e.jsx(g,{item:s,type:"ANSWER_REPLY_LIKED",link:`/QA-section/question/answer/${s==null?void 0:s.answerId}/comments/${s==null?void 0:s.commentId}/reply`}),ke=({item:s})=>e.jsx(g,{item:s,type:"ANSWER_COMMENT_REPLY_LIKED",link:`/QA-section/question/answer/${s==null?void 0:s.answerId}/comments/${s==null?void 0:s.commentId}/reply`}),Ae=({item:s})=>e.jsx(g,{item:s,type:"ANSWER_COMMENT_REPLY",link:`/QA-section/question/answer/${s==null?void 0:s.answerId}/comments/${s==null?void 0:s.commentId}/reply`}),Ie={ARTICLE_LIKED:{icon:H,iconColor:"text-grey-900",message:"upvoted your article"},ARTICLE_COMMENT:{icon:k,iconColor:"text-gray-900",message:"commented on your article"},ARTICLE_REPLY:{icon:A,iconColor:"text-blue-500",message:"replied to your comment on article"},ARTICLE_COMMENT_LIKED:{icon:j,iconColor:"text-red-500",message:"liked your comment on article"},ARTICLE_COMMENT_REPLY_LIKED:{icon:j,iconColor:"text-red-500",message:"liked your reply on article"}},N=({item:s,type:r})=>{var i,d,a,t;const n=Ie[r],c=n.icon,x=m=>(m==null?void 0:m.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent(m.name||"Anonymous")}&background=random`;return e.jsxs(l,{to:`/articles/article/${s==null?void 0:s.articleId}`,className:"px-4 py-2.5 hover:bg-black/5 cursor-pointer flex items-center space-x-3 transition-colors",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx(l,{to:`/about/user/${s.createdBy._id}`,children:e.jsx("img",{src:x(s.createdBy),alt:(i=s.createdBy)==null?void 0:i.name,className:" w-10 h-10 rounded-full object-cover"})}),e.jsx("div",{className:"absolute  -bottom-2 -right-2 z-10 bg-white/90  p-1 rounded-full ",children:e.jsx(c,{className:`w-4 h-4 ${n.iconColor}  `})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{to:`/about/user/${s.createdBy._id}`,className:"line-clamp-2",children:e.jsxs("span",{className:"text-sm font-medium text-[var(--ternery)] line-clamp-2 capitalize hover:underline block",children:[(d=s.createdBy)==null?void 0:d.name," "]})}),e.jsx("span",{className:"text-[var(--grey--900)] line-clamp-2",children:n.message})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-[var(--grey--800)]",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:C(new Date(s==null?void 0:s.createdAt))})]})]}),((a=s.postId)==null?void 0:a.imageUrl)&&e.jsx("div",{className:"relative w-10 h-10 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:(t=s==null?void 0:s.postId)==null?void 0:t.imageUrl,alt:"Post thumbnail",className:"w-full h-full object-cover"})})]})},Re=({item:s})=>e.jsx(N,{item:s,type:"ARTICLE_LIKED"}),Te=({item:s})=>e.jsx(N,{item:s,type:"ARTICLE_COMMENT"}),Me=({item:s})=>e.jsx(N,{item:s,type:"ARTICLE_REPLY"}),Oe=({item:s})=>e.jsx(N,{item:s,type:"ARTICLE_COMMENT_LIKED"}),Se=({item:s})=>e.jsx(N,{item:s,type:"ARTICLE_COMMENT_REPLY_LIKED"}),$e={FOLLOWED:{icon:ie,iconColor:"text-grey-900",message:"has followed you"}},Pe=({item:s,type:r,link:n})=>{var d,a,t;const c=$e[r],x=c.icon,i=m=>(m==null?void 0:m.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent(m.name||"Anonymous")}&background=random`;return e.jsxs(l,{to:n,className:"px-4 py-2.5 hover:bg-black/5 cursor-pointer flex items-center space-x-3 transition-colors",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsx(l,{to:`/about/user/${s.createdBy._id}`,children:e.jsx("img",{src:i(s.createdBy),alt:(d=s.createdBy)==null?void 0:d.name,className:" w-10 h-10 rounded-full object-cover"})}),e.jsx("div",{className:"absolute  -bottom-2 -right-2 z-10  bg-white/90  p-1 rounded-full ",children:e.jsx(x,{className:`w-4 h-4 ${c.iconColor}  `})})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{to:`/about/user/${s.createdBy._id}`,children:e.jsxs("span",{className:"text-sm font-medium text-[var(--ternery)] line-clamp-2 capitalize hover:underline block",children:[(a=s.createdBy)==null?void 0:a.name," "]})}),e.jsx("span",{className:"text-[var(--grey--900)]",children:c.message})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-[var(--grey--800)] pl-2",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:C(new Date(s.createdAt))})]})]}),((t=s.postId)==null?void 0:t.imageUrl)&&e.jsx("div",{className:"relative w-10 h-10 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.postId.imageUrl,alt:"Post thumbnail",className:"w-full h-full object-cover"})})]})},Be=({item:s})=>e.jsx(Pe,{item:s,type:"FOLLOWED",link:`/about/user/${s.createdBy._id}`}),B=({user:s,onClose:r})=>{const[n,c]=u.useState([]),[x,i]=u.useState(!1),d=async()=>{try{const{data:a}=await J.get(`/notifications/${s==null?void 0:s._id}`);c(a)}catch(a){console.error("Error fetching notifications:",a)}};return u.useEffect(()=>(d(),f.emit("join",s._id),requestAnimationFrame(()=>i(!0)),f.on("notification",a=>{c(t=>[a,...t])}),()=>{f.off("notification")}),[s]),e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-[70] transition-opacity duration-300 ",onClick:()=>i(!1)}),e.jsxs("div",{className:`fixed top-0 right-0 w-full sm:w-full md:w-[450px] h-screen bg-white z-[80] 
                    transform transition-transform duration-300 ease-in-out rounded-lg
                    shadow-xl ${x?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-[var(--grey--900)]"}),"Notifications"]}),e.jsx("button",{onClick:()=>{i(!1),setTimeout(r,300)},className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(G,{className:"w-5 h-5 text-gray-500 hover:text-gray-700"})})]}),n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx(O,{className:"w-12 h-12 text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No updates"})]}):e.jsx("div",{onClick:()=>i(!1),className:"h-[calc(100vh-70px)] custom-scrollbar overflow-y-auto pb-4",children:e.jsx("div",{className:"divide-y divide-gray-100",children:n.map((a,t)=>{switch(a.type){case"like":return e.jsx(je,{item:a},t);case"comment":return e.jsx(ge,{item:a},t);case"reply":return e.jsx(fe,{item:a},t);case"commentLiked":return e.jsx(ye,{item:a},t);case"replyLiked":return e.jsx(Ne,{item:a},t);case"answered":return e.jsx(we,{item:a},t);case"answerComment":return e.jsx(Ce,{item:a},t);case"answerLiked":return e.jsx(Ee,{item:a},t);case"answerCommentLiked":return e.jsx(Le,{item:a},t);case"answerCommentReplyLiked":return e.jsx(ke,{item:a},t);case"answerReplyLiked":return e.jsx(_e,{item:a},t);case"answerReply":return e.jsx(Ae,{item:a},t);case"articleLiked":return e.jsx(Re,{item:a},t);case"articleComment":return e.jsx(Te,{item:a},t);case"articleReply":return e.jsx(Me,{item:a},t);case"articleCommentLiked":return e.jsx(Oe,{item:a},t);case"articleCommentReplyLiked":return e.jsx(Se,{item:a},t);case"follow":return e.jsx(Be,{item:a},t)}})})})]})]})};function We({showMobile:s=!0}){const[r,n]=u.useState(null),[c,x]=u.useState(!1),[i,d]=u.useState(!1),[a,t]=u.useState(0),m=X(),{user:p,logout:Y}=_(),q=()=>x(!c),I=o=>{n(o===r?null:o)},{user:h}=_();u.useEffect(()=>{const o=E=>{r!==null&&n(null)};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[r]);const R=async()=>{try{await Y(),x(!1),m("/")}catch(o){console.error("Logout failed:",o)}},U=p?[...(h==null?void 0:h.role)!=="contributor"?[...(h==null?void 0:h.role)==="admin"?[{name:"Notifications",address:"/admin",icon:e.jsx(L,{})}]:[],{name:"Become a contributor",address:"/user/request-contributor",icon:e.jsx(z,{})}]:[],{name:"Change Password",address:"/user/change-password",icon:e.jsx(ee,{})},{name:"Logout",icon:e.jsx(D,{}),onClick:R}]:[{name:"Sign Up",address:"/auth/sign-up",icon:e.jsx(se,{})},{name:"Login",address:"/auth/sign-in",icon:e.jsx(ae,{})}],T=()=>{d(!i)},M=()=>{d(!1)};return u.useEffect(()=>(f.emit("join",h==null?void 0:h._id),f.on("notificationCount",o=>{t(o)}),()=>{f.off("notificationCount")}),[h]),e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"hidden lg:flex w-full bg-[var(--white-color)] sticky top-0 items-center justify-between shadow-[0px_1px_10px_rgba(0,0,0,0.1)] z-50 transition-all ease-in-out p-2 h-[65px]",children:e.jsxs("div",{className:"flex w-full justify-between items-center px-4 lg:px-20 ",children:[e.jsx(l,{to:"/",children:e.jsx("img",{src:P,className:"object-contain w-32 mt-3",alt:"Logo Loading..."})}),e.jsx(de,{}),p?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:T,className:"text-2xl text-gray-800",children:[e.jsx(L,{className:"w-6 h-6 text-gray-600 mt-1 mr-2  "}),a>0&&e.jsx("span",{className:"absolute -top-3 right-0 bg-red-500 text-white text-xs rounded-full p-1 w-4 h-fit",children:a>99?"99+":a})]}),i&&e.jsx(B,{user:h,onClose:M})]}),e.jsx(De,{user:p,miniMenu:c,toggleMiniMenu:q,handleLogout:R})]}):e.jsx(Fe,{})]})}),e.jsx("header",{className:"lg:hidden  left-0 right-0 bg-[var(--white-color)] h-14 z-50",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-4",children:[e.jsx("div",{className:"flex items-center mt-3",children:e.jsx(l,{to:"/",children:e.jsx("img",{src:P,className:"object-contain w-28",alt:"Logo"})})}),e.jsxs("div",{className:"flex items-center gap-4",children:[p&&e.jsxs(e.Fragment,{children:[e.jsx(l,{to:"/chats",children:e.jsx(le,{className:"text-2xl"})}),e.jsx(l,{to:"/Posts",children:e.jsx(te,{className:"text-2xl"})})]}),p?e.jsxs(e.Fragment,{children:[e.jsx(l,{to:`/about/user/${p._id}`,children:e.jsx("img",{src:(p==null?void 0:p.avatar)||"https://cdn-icons-png.flaticon.com/512/147/147142.png",alt:"User",className:"w-7 h-7 rounded-full object-cover"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:T,className:"text-2xl text-gray-800",children:[e.jsx(L,{className:"w-6 h-6 mt-1"}),a>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full px-1",children:a})]}),i&&e.jsx(B,{user:h,onClose:M})]})]}):e.jsx(l,{to:"/auth/sign-in",children:e.jsxs("button",{className:"bg-[var(--secondary)] px-2 py-1 text-sm rounded-[6px] hover:scale-105 transition-all duration-300 hover:bg-[var(--secondary-hover)] flex items-center",children:[e.jsx(re,{className:"text-xl text-gray-600 inline-block"}),e.jsx("span",{className:"ml-2",children:"Sign In"})]})})]})]})}),s&&e.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-[var(--white-color)] shadow-[0_-2px_10px_rgba(0,0,0,0.1)] z-50",children:e.jsxs("div",{className:"flex justify-around items-center h-16",children:[K.map((o,E)=>e.jsx("div",{className:"relative group",children:o.sublinks?e.jsxs("div",{className:"p-2 text-2xl text-[var(--grey--800)] hover:text-[var(--ternery)] transform transition-all duration-150 hover:scale-110 active:scale-95",onClick:v=>{v.stopPropagation(),I(E)},children:[o.icon,e.jsxs("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-[var(--white-color)] rounded-2xl shadow-xl p-2 w-fit border border-[var(--grey--400)] transition-all duration-200 ease-out ${r===E?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:[e.jsx("div",{className:"flex flex-col space-y-3",children:o.sublinks.map(v=>e.jsxs(b,{to:v.address,className:({isActive:W})=>`flex items-center gap-3 p-2 rounded-xl whitespace-nowrap transform transition-all duration-150 hover:scale-105 active:scale-95 ${W?"bg-[var(--blue--100)] text-[var(--ternery)] shadow-sm":"hover:bg-[var(--grey--200)] text-[var(--grey--800)]"}`,onClick:()=>n(null),children:[e.jsx("div",{className:"text-xl",children:v.icon}),e.jsx("span",{className:"text-sm",children:v.name})]},v.name))}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-[var(--white-color)] transform rotate-45 border-r border-b border-[var(--grey--400)] z-[-1]"})]})]}):e.jsx(b,{to:o.address,className:({isActive:v})=>`p-2 text-2xl transform transition-all duration-150 hover:scale-110 active:scale-95 ${v?"text-[var(--ternery)]":"text-[var(--grey--800)] hover:text-[var(--ternery)]"}`,children:o.icon})},o.name)),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-2 text-2xl text-[var(--grey--800)] hover:text-[var(--ternery)] transform transition-all duration-150 hover:scale-110 active:scale-95",onClick:o=>{o.stopPropagation(),I("settings")},children:e.jsx(F,{})}),e.jsxs("div",{className:`absolute bottom-full right-2 mb-2 bg-[var(--white-color)] rounded-2xl shadow-xl p-2 w-fit border border-[var(--grey--400)] transition-all duration-200 ease-out ${r==="settings"?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:[e.jsx("div",{className:"flex flex-col space-y-3",children:U.map(o=>o.onClick?e.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-[var(--grey--200)] rounded-xl cursor-pointer whitespace-nowrap transform transition-all duration-150 hover:scale-105 active:scale-95",onClick:()=>{o.onClick(),n(null)},children:[e.jsx("div",{className:"text-xl text-[var(--grey--800)]",children:o.icon}),e.jsx("span",{className:"text-sm text-[var(--grey--800)]",children:o.name})]},o.name):e.jsxs(l,{to:o.address,className:"flex items-center gap-3 p-2 hover:bg-[var(--grey--200)] rounded-xl whitespace-nowrap transform transition-all duration-150 hover:scale-105 active:scale-95",onClick:()=>n(null),children:[e.jsx("div",{className:"text-xl text-[var(--grey--800)]",children:o.icon}),e.jsx("span",{className:"text-sm text-[var(--grey--800)]",children:o.name})]},o.name))}),e.jsx("div",{className:"absolute -bottom-2 right-4 w-4 h-4 bg-[var(--white-color)] transform rotate-45 border-r border-b border-[var(--grey--400)] z-[-1]"})]})]})]})})]})}const De=({user:s,miniMenu:r,toggleMiniMenu:n,handleLogout:c})=>{const x=S.useRef(null);return S.useEffect(()=>{const i=d=>{x.current&&!x.current.contains(d.target)&&r&&n()};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[r,n]),e.jsxs("div",{ref:x,className:"relative",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-center gap-2",children:[e.jsx(l,{to:`about/user/${s._id}`,children:e.jsxs("div",{className:"group relative",children:[e.jsx("img",{className:"w-7 h-7 object-cover rounded-full border-[3px] border-[var(--grey--600)] hover:border-[var(--ternery)]",src:(s==null?void 0:s.avatar)||"https://e7.pngegg.com/pngimages/81/570/png-clipart-profile-logo-computer-icons-user-user-blue-heroes-thumbnail.png",alt:(s==null?void 0:s.name)||"User"}),e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-[var(--grey--900)] text-[var(--white-color)] px-2 py-1 rounded text-sm opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"View Profile"})]})}),r?e.jsx(D,{className:"block cursor-pointer size-8 hover:text-[var(--ternery)] hover:bg-[var(--grey--200)] rounded-full p-1 transition-transform duration-300",onClick:n}):e.jsx(F,{className:"block cursor-pointer size-8 hover:text-[var(--ternery)] hover:bg-[var(--grey--200)] rounded-full p-1 transition-transform duration-300",onClick:n})]}),e.jsx(pe,{user:s,miniMenu:r,handleLogout:c})]})},Fe=()=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{to:"/auth/sign-up",children:e.jsxs("button",{className:"hidden lg:flex bg-[var(--white-color)] items-center gap-1 rounded-[5px] shadow-[0_2px_0_0_rgba(0,0,0,0.04),_inset_0_0_0_2px_var(--grey--400)] transition-all ease-in-out duration-600 text-[var(--grey--900)] px-3 py-2 text-xs leading-[1.32] hover:bg-[var(--grey--200)]",children:[e.jsx("span",{children:"Sign Up"}),e.jsx($,{})]})}),e.jsx(l,{to:"/auth/sign-in",children:e.jsxs("button",{className:"hidden lg:flex bg-[var(--black-color)] items-center gap-1 rounded-[5px] transition-all ease-in-out duration-600 text-[var(--white-color)] px-3 py-2 text-xs leading-[1.32] hover:bg-[var(--brand--black-pearl)]",children:[e.jsx("span",{children:"Login"}),e.jsx($,{})]})})]});export{We as default};
